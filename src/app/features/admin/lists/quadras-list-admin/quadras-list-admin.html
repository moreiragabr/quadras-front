<link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0&icon_names=editdelete_foreverarrow_drop_downmysterysaveaddcancel" />

<div class="mt-5 text-center">
    <h2 class="fonte fonte-preta">Administrar quadras</h2>
</div>
<div class="custom-container h-50 overflow-auto">
    <div class="container-fluid mt-5 mb-5">
        <table class="table table-hover table-bordered border-color justify-content-center text-center">
            <thead>
                <tr>
                    <th scope="col" class="cor fonte">Nome</th>
                    <th scope="col" class="col-4 cor fonte">Tipo de esporte</th>
                    <th scope="col" class="cor fonte">Proprietário</th>
                    <th scope="col" class="cor btn botao-adicionar"><span class="material-symbols-outlined"
                            (click)="openModalNewQuadra()">
                            add
                        </span></th>
                </tr>
            </thead>
            <tbody>
                @for(quadra of quadras; track quadra.id){
                <tr>
                    <td class="cor">{{quadra.nome}}</td>
                    <td class="cor">{{quadra.tipoQuadra}}</td>
                    <td class="cor">{{quadra.proprietario?.nome}}</td>
                    <td class="cor icones">
                        <!--
                        <button type="button" class="btn botao-excluir"><span class="material-symbols-outlined icone">
                                delete_forever
                            </span></button> -->
                        <button type="button" class="btn botao-aumentar" (click)="openModal(quadra)"><span
                                class="material-symbols-outlined">
                                mystery
                            </span></button>
                    </td>
                </tr>

                }
            </tbody>
        </table>
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="staticBackdrop" #modalRef data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1">
    <div class="modal-dialog modal-xl modal-xl-custom">
        <div class="aumentar-tamanho">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 id="staticBackdropLabel">
                        <div class="fonte fonte-preta">Detalhes</div>
                    </h1>
                    <button type="button" class="btn-close" (click)="closeModal()"></button>
                </div>
                <div class="modal-body modal-body-scrollable">
                    <div class="container custom d-flex">
                        <div class="row custom">
                            <!-- data-bs-spy="scroll" data-bs-smooth-scroll="true" -->
                            <div class="col-3 border-end">
                                <p><strong>Cód:</strong> {{selectedQuadra.id}}</p>
                                <p><strong>Nome:</strong> {{selectedQuadra.nome}}</p>
                                <p><strong>Proprietário:</strong> {{selectedQuadra.proprietario?.nome}}</p>
                                <p><strong>Tipo de esporte:</strong> {{selectedQuadra.tipoQuadra}}</p>
                                <p><strong>Valor por hora:</strong> {{selectedQuadra.valorHora}}</p>
                                <!-- <p><strong>Partida gravável:</strong>
                                    @if(selectedQuadra.partidaGravavel){
                                    Sim
                                    }@else {
                                    Não
                                    }
                                </p> -->
                                <button type="button" class="btn botao-editar m-1"><span
                                        class="material-symbols-outlined" (click)="openModalEditQuadra(selectedQuadra)">
                                        edit
                                    </span></button>
                                <button type="button" class="btn botao-excluir m-1"><span
                                        class="material-symbols-outlined" (click)="delete(selectedQuadra.id)">
                                        delete_forever
                                    </span></button>
                            </div>
                            <div class="col-4 border-end ">
                                <h5 class="fonte fonte-preta">Horários disponíveis:</h5>
                                <hr>
                                <div class="h-50 overflow-auto">
                                    <!-- @for(horario of selectedQuadra.horarios; track horario.id){
                                    <div>
                                        <p><strong>Horas:</strong></p>
                                        <p>{{horario.horario}}</p>
                                    </div>
                                    <hr>
                                    } -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn" (click)="closeModal()">Fechar</button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal novo usuário -->
<div class="modal fade" id="staticBackdrop" #modalRefNewQuadra data-bs-backdrop="static" data-bs-keyboard="false"
    tabindex="-1">
    <div class="modal-dialog modal-l">
        <div class="condensar">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 id="staticBackdropLabel">
                        <div class="fonte fonte-preta">Adicionar nova quadra</div>
                    </h1>
                </div>
                <div class="m-2">
                    <label for="nome" class="form-label">Nome</label>
                    <input type="text" class="form-control" id="nome" [(ngModel)]="newQuadra!.nome">
                </div>
                <div class="m-2">
                    <label for="presidente" class="form-label">Proprietário</label>
                    <select class="form-select" [(ngModel)]="newQuadra.proprietario">
                        @for(usuario of listaUsuarios; track usuario.id){
                        <option [ngValue]="usuario">{{usuario.nome}}</option>
                        }
                    </select>
                </div>
                <div class="m-2">
                    <label for="nome" class="form-label">Tipo de esporte</label>
                    <select class="form-select" [(ngModel)]="newQuadra!.tipoQuadra">
                        <option selected value="POLIESPORTIVA">Poliesportiva</option>
                        <option value="BASQUETE">Basquete</option>
                        <option value="FUTSAL">Futsal</option>
                        <option value="VOLEI">Volei</option>
                        <option value="TENIS">Tênis</option>
                        <option value="BEACHTENIS">Beach tênis</option>
                        <option value="HANDEBOL">Handebol</option>
                        <option value="AREIA">Quadra de areia</option>
                        <option value="SOCIETY">Society</option>
                    </select>
                </div>
                <div class="m-2">
                    <label for="nome" class="form-label">Valor-hora</label>
                    <input type="number" class="form-control" id="nome" [(ngModel)]="newQuadra!.valorHora">
                </div>
                <!-- <div class="m-2">
                    <label for="nome" class="form-label">Partidas graváveis?</label>
                    <select class="form-select" [(ngModel)]="newQuadra!.partidaGravavel">
                        <option selected value="true">Sim</option>
                        <option value="false">Não</option>
                    </select>
                </div> -->
                <div class="m-2">
                    <label for="nome" class="form-label">Descrição</label>
                    <input type="text" class="form-control" id="nome" [(ngModel)]="newQuadra!.descricao">
                </div>
                <div class="m-2">
                    <label for="nome" class="form-label">Estado</label>
                    <input type="text" class="form-control" id="nome" [(ngModel)]="newQuadra!.estado">
                </div>
                <div class="m-2">
                    <label for="nome" class="form-label">Cidade</label>
                    <input type="text" class="form-control" id="nome" [(ngModel)]="newQuadra!.cidade">
                </div>
                <div class="m-2">
                    <label for="nome" class="form-label">Bairro</label>
                    <input type="text" class="form-control" id="nome" [(ngModel)]="newQuadra!.bairro">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn botao-cancelar" (click)="closeModalNewQuadra()"><span
                            class="material-symbols-outlined ">
                            cancel
                        </span></button>

                    <button type="button" class="btn botao-salvar"><span class="material-symbols-outlined icone"
                            (click)="saveQuadra(newQuadra!)">
                            save
                        </span></button>
                </div>
            </div>
        </div>
    </div>
</div>



<!-- Modal editar quadra -->
<div class="modal fade" id="staticBackdrop" #ModalRefEditQuadra data-bs-backdrop="static" data-bs-keyboard="false"
    tabindex="-1">
    <div class="modal-dialog modal-l">
        <div class="aumentar-tamanho">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 id="staticBackdropLabel">
                        <div class="fonte fonte-preta">Editar quadra</div>
                    </h1>
                    <button type="button" class="btn-close" (click)="closeModalEditQuadra(true)"></button>
                </div>
                <div class="modal-body modal-body-scrollable h-25 overflow-auto">
                    <div class="container custom d-flex">
                        <div class="row custom-sm ">
                            <!-- data-bs-spy="scroll" data-bs-smooth-scroll="true" -->
                            <div class="mb=3">
                                <label class="form-label">Proprietario</label>
                                <p class="mb-2 d-flex align-items-center">{{editedQuadra.proprietario?.nome}}
                                    <span class="material-symbols-outlined mini-botao-adicionar"
                                        (click)="openSwalModal(editedQuadra.id,'proprietario')">
                                        add
                                    </span>
                            </div>
                            <hr>
                            <div class="mb=3">
                                <label class="form-label">Horários</label>
                                @for(horario of editedQuadra.horarios; track horario.id){
                                <p class="mb-2 d-flex align-items-center">{{horario.horario}} <span
                                        class="material-symbols-outlined mini-botao-deletar"
                                        (click)="removerHorario(horario.id)">
                                        delete_forever
                                    </span></p>
                                }
                                <span class="material-symbols-outlined mini-botao-adicionar"
                                    (click)="openSwalModal(editedQuadra.id,'horario')">
                                    add
                                </span>
                            </div>
                            <hr>
                            <div class="mb-3">
                                <label for="nome" class="form-label">Nome</label>
                                <input type="text" class="form-control form-custom" id="nome"
                                    [(ngModel)]="editedQuadra!.nome">
                            </div>
                            <hr>
                            <div class="mb-3">
                                <label for="nome" class="form-label">Tipo de esporte</label>
                                <select class="form-select" [(ngModel)]="editedQuadra!.tipoQuadra">
                                    <option selected value="POLIESPORTIVA">Poliesportiva</option>
                                    <option value="BASQUETE">Basquete</option>
                                    <option value="FUTSAL">Futsal</option>
                                    <option value="VOLEI">Volei</option>
                                    <option value="TENIS">Tenis</option>
                                    <option value="HANDEBOL">Handebol</option>
                                    <option value="AREIA">Areia</option>
                                    <option value="SOCIETY">Society</option>
                                </select>
                            </div>
                            <hr>
                            <div class="mb-3">
                                <label for="nome" class="form-label">Valor-hora</label>
                                <input type="numb" class="form-control form-custom" id="nome"
                                    [(ngModel)]="editedQuadra!.valorHora">
                            </div>
                            <!-- <hr>
                            <div class="mb-3">
                                <label for="nome" class="form-label">Partidas graváveis?</label>
                                <select class="form-select" [(ngModel)]="editedQuadra!.partidaGravavel">
                                    <option selected value="true">Sim</option>
                                    <option value="false">Não</option>
                                </select>
                            </div> -->
                            <hr>
                            <div class="mb-3">
                                <label for="nome" class="form-label">Descrição</label>
                                <input type="text" class="form-control" id="nome" [(ngModel)]="editedQuadra!.descricao">
                            </div>
                            <hr>
                            <div class="mb-3">
                                <label for="nome" class="form-label">Estado</label>
                                <input type="text" class="form-control" id="nome" [(ngModel)]="editedQuadra!.estado">
                            </div>
                            <hr>
                            <div class="mb-3">
                                <label for="nome" class="form-label">Cidade</label>
                                <input type="text" class="form-control" id="nome" [(ngModel)]="editedQuadra!.cidade">
                            </div>
                            <hr>
                            <div class="mb-3">
                                <label for="nome" class="form-label">Bairro</label>
                                <input type="text" class="form-control" id="nome" [(ngModel)]="editedQuadra!.bairro">
                            </div>
                            <hr>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn botao-salvar"><span class="material-symbols-outlined icone"
                                (click)="edit(selectedQuadra.id, editedQuadra)">
                                save
                            </span></button>
                        <button type="button" class="btn" (click)="closeModalEditQuadra(true)">Fechar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>